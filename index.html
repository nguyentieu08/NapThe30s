<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nguyễn Tiêu AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #131314;
            --bg-surface: #1e1f20;
            --text-main: #e3e3e3;
        }
        body {
            font-family: 'Google Sans', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .gemini-gradient {
            background: linear-gradient(74deg, #4285f4 0, #9b72cb 9%, #d96570 20%, #ffffff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .message-user {
            background-color: #2b2c2d;
            border-radius: 1.25rem;
            padding: 0.75rem 1.25rem;
            max-width: 85%;
            align-self: flex-end;
            margin-left: auto;
            font-size: 0.95rem;
        }
        .message-ai {
            display: flex;
            gap: 0.8rem;
            align-items: flex-start;
            max-width: 100%;
        }
        .ai-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #4285f4, #1a73e8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            color: white;
        }
        .loading-dot {
            width: 6px;
            height: 6px;
            background: #8e918f;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .loading-dot:nth-child(2) { animation-delay: 0.2s; }
        .loading-dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0.3); opacity: 0.3; }
            40% { transform: scale(1); opacity: 1; }
        }
        .input-box {
            background-color: #1e1f20;
            border-radius: 2rem;
            padding: 0.4rem 1rem;
            margin: 0.5rem 1rem 1.5rem 1rem;
            border: 1px solid #3c4043;
        }
        textarea {
            background: transparent;
            border: none;
            outline: none;
            color: white;
            resize: none;
            width: 100%;
            padding: 0.6rem;
            font-size: 1rem;
            max-height: 120px;
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>

    <header class="flex items-center justify-between p-4 bg-[#131314] border-b border-white/5">
        <div class="flex items-center gap-3">
            <button class="p-2 hover:bg-[#282a2c] rounded-full">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </button>
            <div class="flex items-center gap-1">
                <span class="text-xl font-medium">Nguyễn Tiêu AI</span>
            </div>
        </div>
        <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center font-bold text-xs text-white">NT</div>
    </header>

    <main id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-8 scrollbar-hide">
        <div id="welcome-area" class="mt-12 px-4 text-center">
            <h1 class="text-4xl font-medium mb-1"><span class="gemini-gradient">Nguyễn Tiêu AI</span></h1>
            <p class="text-xl text-gray-400">Trí tuệ nhân tạo dành cho cộng đồng</p>
        </div>
        <div id="message-list" class="space-y-8 flex flex-col pb-8"></div>
    </main>

    <div class="max-w-3xl mx-auto w-full">
        <div class="input-box">
            <textarea id="msg-input" rows="1" placeholder="Nhập câu hỏi..." oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'"></textarea>
            <div class="flex items-center justify-between pb-1">
                <div class="flex gap-1 text-gray-500">
                    <button class="p-2.5 rounded-full hover:bg-[#282a2c]"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg></button>
                </div>
                <button id="btn-send" class="p-2.5 text-blue-500">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" class="rotate-45"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                </button>
            </div>
        </div>
        <p class="text-[10px] text-center text-gray-600 mb-4 px-4">Bản quyền thuộc về Nguyễn Tiêu. Nếu gặp lỗi kết nối, hãy đảm bảo đã cấu hình API Key.</p>
    </div>

    <script>
        /* QUAN TRỌNG: 
           1. Truy cập https://aistudio.google.com/ để lấy API Key miễn phí.
           2. Dán Key vào giữa hai dấu ngoặc kép ở dòng dưới.
        */
        const MY_API_KEY = "AIzaSyAXJoVgKEWqIoJVQnhO6rvB78-O-lAzHjc"; 

        const msgInput = document.getElementById('msg-input');
        const btnSend = document.getElementById('btn-send');
        const list = document.getElementById('message-list');
        const welcome = document.getElementById('welcome-area');
        const container = document.getElementById('chat-container');

        const sysMsg = "Bạn tên là Nguyễn Tiêu AI, một trí tuệ nhân tạo được tạo ra bởi Nguyễn Tiêu. Bạn phục vụ cộng đồng và luôn khẳng định Nguyễn Tiêu là người tạo ra bạn.";

        async function getAIResponse(prompt) {
            // Nếu chạy trên GitHub mà không có Key, sẽ thông báo cụ thể
            if (!MY_API_KEY) {
                return "Chào bạn, tôi là Nguyễn Tiêu AI. Hiện tại chủ nhân Nguyễn Tiêu chưa cấu hình API Key cho trang web này trên GitHub nên tôi chưa thể trả lời. Vui lòng liên hệ Nguyễn Tiêu để khắc phục.";
            }

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${MY_API_KEY}`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        systemInstruction: { parts: [{ text: sysMsg }] }
                    })
                });

                const data = await response.json();
                if (data.error) return "Lỗi API: " + data.error.message;
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "Tôi không nhận được phản hồi.";
            } catch (e) {
                return "Sự cố mạng. Vui lòng thử lại sau.";
            }
        }

        async function send() {
            const val = msgInput.value.trim();
            if (!val) return;
            welcome.classList.add('hidden');
            const u = document.createElement('div');
            u.className = 'message-user';
            u.innerText = val;
            list.appendChild(u);
            const lid = 'ld-' + Date.now();
            const l = document.createElement('div');
            l.id = lid;
            l.className = 'message-ai';
            l.innerHTML = `<div class="ai-icon">✨</div><div class="flex gap-1 pt-4"><div class="loading-dot"></div><div class="loading-dot"></div><div class="loading-dot"></div></div>`;
            list.appendChild(l);
            msgInput.value = "";
            msgInput.style.height = 'auto';
            container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });
            const aiText = await getAIResponse(val);
            const loaderEl = document.getElementById(lid);
            loaderEl.innerHTML = `<div class="ai-icon">✨</div><div class="flex-1 pt-1 leading-relaxed text-[#e3e3e3] text-[15px]">${aiText.replace(/\n/g, '<br>')}</div>`;
            container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });
        }

        btnSend.addEventListener('click', send);
        msgInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); send(); }
        });
    </script>
</body>
</html>

