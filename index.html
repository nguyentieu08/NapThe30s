<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini AI - Real Response</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Google Sans', sans-serif; background-color: #131314; color: #e3e3e3; overflow: hidden; }
        .gemini-gradient {
            background: linear-gradient(74deg, #4285f4 0, #9b72cb 9%, #d96570 20%, #131314 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .input-container { background-color: #1e1f20; border-radius: 32px; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        #sidebar { transition: transform 0.3s ease, width 0.3s ease; }
        @media (max-width: 768px) {
            #sidebar { position: fixed; transform: translateX(-100%); z-index: 50; height: 100%; }
            #sidebar.open { transform: translateX(0); }
        }
        .message-ai { line-height: 1.6; color: #e3e3e3; }
        .message-ai code { background: #2d2d2d; padding: 2px 5px; border-radius: 4px; font-family: monospace; }
        .loading-dots span { animation: blink 1.4s infinite both; font-size: 24px; }
        .loading-dots span:nth-child(2) { animation-delay: .2s; }
        .loading-dots span:nth-child(3) { animation-delay: .4s; }
        @keyframes blink { 0% { opacity: .2; } 20% { opacity: 1; } 100% { opacity: .2; } }
    </style>
</head>
<body class="flex h-screen w-screen">

    <div id="overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/50 z-40 hidden"></div>

    <aside id="sidebar" class="w-64 bg-[#1e1f20] flex flex-col shrink-0 border-r border-gray-800 md:border-none">
        <div class="p-4 flex flex-col h-full">
            <button onclick="toggleSidebar()" class="p-3 w-fit rounded-full hover:bg-[#333537] mb-8">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </button>
            <div onclick="location.reload()" class="flex items-center gap-3 px-4 py-3 bg-[#131314] rounded-full text-gray-400 cursor-pointer hover:bg-[#282a2c] w-fit mb-6">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                <span class="text-sm font-medium pr-2">Tr√≤ chuy·ªán m·ªõi</span>
            </div>
            <div class="flex-1 overflow-y-auto scrollbar-hide">
                <p class="text-xs font-medium px-4 py-2 text-gray-500 uppercase">G·∫ßn ƒë√¢y</p>
                <div id="history-list" class="space-y-1"></div>
            </div>
        </div>
    </aside>

    <main class="flex-1 flex flex-col min-w-0 bg-[#131314] relative">
        <nav class="flex items-center justify-between p-4 sticky top-0 bg-[#131314]/80 backdrop-blur-md z-30">
            <button onclick="toggleSidebar()" class="md:hidden p-2 rounded-full hover:bg-[#333537]">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line></svg>
            </button>
            <span class="text-xl font-medium px-4">Gemini</span>
            <div class="w-9 h-9 rounded-full bg-indigo-600 flex items-center justify-center font-bold text-sm mx-4">G</div>
        </nav>

        <div id="scroll-area" class="flex-1 overflow-y-auto px-4 md:px-20 lg:px-40 pb-44 scrollbar-hide">
            <div id="welcome-screen" class="max-w-3xl mx-auto pt-16">
                <h1 class="text-4xl md:text-6xl font-medium mb-2"><span class="gemini-gradient">Xin ch√†o, t√¥i l√† Gemini</span></h1>
                <p class="text-4xl md:text-5xl font-medium text-[#444746]">H√¥m nay t√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-12">
                    <div onclick="fillInput('Gi·∫£i th√≠ch v·ªÅ tr√≠ tu·ªá nh√¢n t·∫°o')" class="bg-[#1e1f20] p-4 rounded-2xl cursor-pointer hover:bg-[#333537]">Gi·∫£i th√≠ch v·ªÅ tr√≠ tu·ªá nh√¢n t·∫°o...</div>
                    <div onclick="fillInput('G·ª£i √Ω th·ª±c ƒë∆°n t·ªëi nay')" class="bg-[#1e1f20] p-4 rounded-2xl cursor-pointer hover:bg-[#333537]">G·ª£i √Ω th·ª±c ƒë∆°n t·ªëi nay...</div>
                </div>
            </div>
            <div id="chat-messages" class="max-w-3xl mx-auto mt-8 space-y-8 hidden"></div>
        </div>

        <div class="absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-[#131314] via-[#131314] to-transparent">
            <div class="max-w-3xl mx-auto">
                <div class="input-container p-2 flex flex-col border border-transparent focus-within:border-gray-600 shadow-2xl">
                    <textarea id="main-input" rows="1" placeholder="Nh·∫≠p c√¢u h·ªèi t·∫°i ƒë√¢y..." class="w-full bg-transparent border-none outline-none px-4 py-3 text-lg resize-none max-h-60 overflow-y-auto" oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'"></textarea>
                    <div class="flex items-center justify-between px-2 pb-1">
                        <div class="flex gap-2 text-gray-400 p-2">üñºÔ∏è üéôÔ∏è</div>
                        <button id="send-btn" class="p-2.5 rounded-full text-gray-600 transition-colors">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                        </button>
                    </div>
                </div>
                <p class="text-[11px] text-center text-gray-500 mt-4">Gemini c√≥ th·ªÉ ƒë∆∞a ra th√¥ng tin kh√¥ng ch√≠nh x√°c.</p>
            </div>
        </div>
    </main>

    <script>
        const apiKey = ""; // API Key s·∫Ω ƒë∆∞·ª£c h·ªá th·ªëng t·ª± ƒë·ªông ch√®n v√†o khi ch·∫°y
        const mainInput = document.getElementById('main-input');
        const sendBtn = document.getElementById('send-btn');
        const chatMessages = document.getElementById('chat-messages');
        const welcomeScreen = document.getElementById('welcome-screen');
        const scrollArea = document.getElementById('scroll-area');

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('hidden');
        }

        async function callGemini(prompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            
            let retries = 0;
            const delays = [1000, 2000, 4000, 8000, 16000];

            while (retries < 5) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                    });
                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text || "Kh√¥ng c√≥ ph·∫£n h·ªìi.";
                } catch (error) {
                    retries++;
                    if (retries === 5) return "L·ªói k·∫øt n·ªëi. Vui l√≤ng th·ª≠ l·∫°i sau.";
                    await new Promise(resolve => setTimeout(resolve, delays[retries-1]));
                }
            }
        }

        async function handleSend() {
            const text = mainInput.value.trim();
            if (!text) return;

            welcomeScreen.classList.add('hidden');
            chatMessages.classList.remove('hidden');

            // Hi·ªÉn th·ªã tin nh·∫Øn ng∆∞·ªùi d√πng
            chatMessages.innerHTML += `<div class="flex flex-col items-end"><div class="bg-[#1e1f20] px-5 py-3 rounded-2xl max-w-[85%]">${text}</div></div>`;
            
            // Hi·ªÉn th·ªã tr·∫°ng th√°i ƒëang t·∫£i
            const aiMsgId = 'ai-' + Date.now();
            chatMessages.innerHTML += `
                <div class="flex gap-4 items-start" id="${aiMsgId}">
                    <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center shrink-0">‚ú®</div>
                    <div class="message-ai pt-1 flex-1">
                        <div class="loading-dots"><span>.</span><span>.</span><span>.</span></div>
                    </div>
                </div>`;
            
            mainInput.value = "";
            mainInput.style.height = 'auto';
            scrollArea.scrollTo({ top: scrollArea.scrollHeight, behavior: 'smooth' });

            // G·ªçi API th·∫≠t
            const response = await callGemini(text);
            const aiContainer = document.getElementById(aiMsgId).querySelector('.message-ai');
            aiContainer.innerHTML = response.replace(/\n/g, '<br>');
            scrollArea.scrollTo({ top: scrollArea.scrollHeight, behavior: 'smooth' });
        }

        function fillInput(t) { mainInput.value = t; mainInput.focus(); }

        sendBtn.addEventListener('click', handleSend);
        mainInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey && window.innerWidth > 768) {
                e.preventDefault();
                handleSend();
            }
        });
    </script>
</body>
</html>

